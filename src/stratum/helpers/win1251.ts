export const win1251Table: string[] = [
    String.fromCharCode(0),
    String.fromCharCode(1),
    String.fromCharCode(2),
    String.fromCharCode(3),
    String.fromCharCode(4),
    String.fromCharCode(5),
    String.fromCharCode(6),
    String.fromCharCode(7),
    String.fromCharCode(8),
    String.fromCharCode(9),
    String.fromCharCode(10),
    String.fromCharCode(11),
    String.fromCharCode(12),
    String.fromCharCode(13),
    String.fromCharCode(14),
    String.fromCharCode(15),
    String.fromCharCode(16),
    String.fromCharCode(17),
    String.fromCharCode(18),
    String.fromCharCode(19),
    String.fromCharCode(20),
    String.fromCharCode(21),
    String.fromCharCode(22),
    String.fromCharCode(23),
    String.fromCharCode(24),
    String.fromCharCode(25),
    String.fromCharCode(26),
    String.fromCharCode(27),
    String.fromCharCode(28),
    String.fromCharCode(29),
    String.fromCharCode(30),
    String.fromCharCode(31),
    String.fromCharCode(32),
    String.fromCharCode(33),
    String.fromCharCode(34),
    String.fromCharCode(35),
    String.fromCharCode(36),
    String.fromCharCode(37),
    String.fromCharCode(38),
    String.fromCharCode(39),
    String.fromCharCode(40),
    String.fromCharCode(41),
    String.fromCharCode(42),
    String.fromCharCode(43),
    String.fromCharCode(44),
    String.fromCharCode(45),
    String.fromCharCode(46),
    String.fromCharCode(47),
    String.fromCharCode(48),
    String.fromCharCode(49),
    String.fromCharCode(50),
    String.fromCharCode(51),
    String.fromCharCode(52),
    String.fromCharCode(53),
    String.fromCharCode(54),
    String.fromCharCode(55),
    String.fromCharCode(56),
    String.fromCharCode(57),
    String.fromCharCode(58),
    String.fromCharCode(59),
    String.fromCharCode(60),
    String.fromCharCode(61),
    String.fromCharCode(62),
    String.fromCharCode(63),
    String.fromCharCode(64),
    String.fromCharCode(65),
    String.fromCharCode(66),
    String.fromCharCode(67),
    String.fromCharCode(68),
    String.fromCharCode(69),
    String.fromCharCode(70),
    String.fromCharCode(71),
    String.fromCharCode(72),
    String.fromCharCode(73),
    String.fromCharCode(74),
    String.fromCharCode(75),
    String.fromCharCode(76),
    String.fromCharCode(77),
    String.fromCharCode(78),
    String.fromCharCode(79),
    String.fromCharCode(80),
    String.fromCharCode(81),
    String.fromCharCode(82),
    String.fromCharCode(83),
    String.fromCharCode(84),
    String.fromCharCode(85),
    String.fromCharCode(86),
    String.fromCharCode(87),
    String.fromCharCode(88),
    String.fromCharCode(89),
    String.fromCharCode(90),
    String.fromCharCode(91),
    String.fromCharCode(92),
    String.fromCharCode(93),
    String.fromCharCode(94),
    String.fromCharCode(95),
    String.fromCharCode(96),
    String.fromCharCode(97),
    String.fromCharCode(98),
    String.fromCharCode(99),
    String.fromCharCode(100),
    String.fromCharCode(101),
    String.fromCharCode(102),
    String.fromCharCode(103),
    String.fromCharCode(104),
    String.fromCharCode(105),
    String.fromCharCode(106),
    String.fromCharCode(107),
    String.fromCharCode(108),
    String.fromCharCode(109),
    String.fromCharCode(110),
    String.fromCharCode(111),
    String.fromCharCode(112),
    String.fromCharCode(113),
    String.fromCharCode(114),
    String.fromCharCode(115),
    String.fromCharCode(116),
    String.fromCharCode(117),
    String.fromCharCode(118),
    String.fromCharCode(119),
    String.fromCharCode(120),
    String.fromCharCode(121),
    String.fromCharCode(122),
    String.fromCharCode(123),
    String.fromCharCode(124),
    String.fromCharCode(125),
    String.fromCharCode(126),
    String.fromCharCode(127),
    "Ђ",
    "Ѓ",
    "‚",
    "ѓ",
    "„",
    "…",
    "†",
    "‡",
    "€",
    "‰",
    "Љ",
    "‹",
    "Њ",
    "Ќ",
    "Ћ",
    "Џ",
    "ђ",
    "‘",
    "’",
    "“",
    "”",
    "•",
    "–",
    "—",
    "",
    "™",
    "љ",
    "›",
    "њ",
    "ќ",
    "ћ",
    "џ",
    " ",
    "Ў",
    "ў",
    "Ћ",
    "¤",
    "Ґ",
    "¦",
    "§",
    "Ё",
    "©",
    "Є",
    "«",
    "¬",
    "",
    "®",
    "Ї",
    "°",
    "±",
    "І",
    "і",
    "ґ",
    "µ",
    "¶",
    "·",
    "ё",
    "№",
    "є",
    "»",
    "ј",
    "Ѕ",
    "ѕ",
    "ї",
    "А",
    "Б",
    "В",
    "Г",
    "Д",
    "Е",
    "Ж",
    "З",
    "И",
    "Й",
    "К",
    "Л",
    "М",
    "Н",
    "О",
    "П",
    "Р",
    "С",
    "Т",
    "У",
    "Ф",
    "Х",
    "Ц",
    "Ч",
    "Ш",
    "Щ",
    "Ъ",
    "Ы",
    "Ь",
    "Э",
    "Ю",
    "Я",
    "а",
    "б",
    "в",
    "г",
    "д",
    "е",
    "ж",
    "з",
    "и",
    "й",
    "к",
    "л",
    "м",
    "н",
    "о",
    "п",
    "р",
    "с",
    "т",
    "у",
    "ф",
    "х",
    "ц",
    "ч",
    "ш",
    "щ",
    "ъ",
    "ы",
    "ь",
    "э",
    "ю",
    "я",
];

export function decode(bytes: Uint8Array): string {
    return Array.from(bytes)
        .map((b) => win1251Table[b])
        .join("");
}

const SP = " ".charCodeAt(0);

export function encode(val: string): Uint8Array {
    return new Uint8Array(
        [...val].map((c) => {
            const idx = win1251Table.indexOf(c);
            return idx > -1 ? idx : SP;
        })
    );
}
